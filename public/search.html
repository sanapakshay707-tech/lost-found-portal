<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Search Lost & Found Items</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(135deg, #1e3c72, #2a5298);
      color: white;
      font-family: 'Segoe UI', sans-serif;
      padding: 30px;
    }

    .search-box {
      max-width: 600px;
      margin: auto;
    }

    .results {
      margin-top: 30px;
    }

    .card {
      background-color: rgba(255, 255, 255, 0.1);
      border: none;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 20px;
      backdrop-filter: blur(8px);
      color: white;
    }

    .btn-claim {
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="search-box text-center">
    <h2 class="mb-4">üîç Search Lost & Found Items</h2>
    <input type="text" id="searchInput" class="form-control mb-3" placeholder="Enter item title...">
    <button class="btn btn-light" onclick="searchItems()">Search</button>
  </div>

  <div class="results container" id="resultsContainer"></div>

  <script>
    async function searchItems() {
      const query = document.getElementById('searchInput').value.trim();
      if (!query) return;

      try {
        const res = await fetch(`http://localhost:3000/api/search?q=${encodeURIComponent(query)}`);
        const items = await res.json();

        const container = document.getElementById('resultsContainer');
        container.innerHTML = '';

        if (items.length === 0) {
          container.innerHTML = '<p class="text-center">No items found.</p>';
          return;
        }

        items.forEach(item => {
          const card = document.createElement('div');
          card.className = 'card';

          card.innerHTML = `
            <h5>${item.title}</h5>
            <p><strong>Reported by:</strong> ${item.email}</p>
            <p><strong>Description:</strong> ${item.reason}</p>
            <button class="btn btn-warning btn-claim" onclick="location.href='claim.html?title=${encodeURIComponent(item.title)}'">Claim This Item</button>
          `;

          container.appendChild(card);
        });
      } catch (err) {
        console.error("‚ùå Error fetching search results:", err);
        document.getElementById('resultsContainer').innerHTML = '<p class="text-center text-danger">Error fetching results.</p>';
      }
    }
  </script>
</body>
</html>
